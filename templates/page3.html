{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-5 border-bottom border-secondary pb-3"><h1 class="text-danger fw-bold"><i class="fa-solid fa-bookmark me-2"></i>Favorites</h1><form method="POST" class="d-flex gap-2"><input type="hidden" name="action" value="add_fav_cat"><input type="text" name="cat_name" class="form-control form-control-sm" placeholder="New Folder..." required><button class="btn btn-sm btn-success text-nowrap"><i class="fa-solid fa-plus"></i> Add Folder</button></form></div>
{% for cat in fav_categories %}
    <div class="mb-5"><div class="d-flex justify-content-between align-items-center mb-3"><h3 class="fw-bold text-white border-start border-4 border-danger ps-3">{{ cat }}</h3><form method="POST" onsubmit="return confirm('Delete folder {{ cat }}?');"><input type="hidden" name="action" value="del_fav_cat"><input type="hidden" name="cat_name" value="{{ cat }}"><button class="btn btn-outline-danger btn-sm"><i class="fa-solid fa-trash"></i> Delete Folder</button></form></div>
        {% set items = favorites | selectattr("fav_category", "equalto", cat) | list %}
        {% if items|length == 0 %}<p class="text-muted fst-italic">No articles saved here yet.</p>{% else %}
            <div class="row g-4">{% for item in items %}<div class="col-md-6 col-lg-4"><div class="card h-100 border-0 shadow-sm"><div class="ratio ratio-16x9"><img src="{{ item.thumbnail }}" class="card-img-top object-fit-cover"></div><div class="card-body d-flex flex-column"><h6 class="card-title text-truncate-2">{{ item.title }}</h6><div class="mt-auto d-flex justify-content-between align-items-center pt-3"><a href="{{ item.link }}" target="_blank" class="btn btn-sm btn-primary">Read</a><form method="POST" onsubmit="return confirm('Remove?');"><input type="hidden" name="action" value="delete_article"><input type="hidden" name="article_link" value="{{ item.link }}"><button class="btn btn-sm btn-link text-danger p-0"><i class="fa-solid fa-trash"></i></button></form></div></div></div></div>{% endfor %}</div>
        {% endif %}
    </div>
{% endfor %}
{% endblock %}